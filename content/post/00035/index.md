---
title: 画像の距離変換をおこなう
tags:  ["OpenCV", "距離変換"]
categories:  ["OpenCV", "画像処理"]
date: 2020-08-07 11:00:00 +0900
image: 10fec2481837301639f81cf34c21e4b1.png
---
本記事はQrunchからの転載です。
___

画像に対する距離変換とは、グレースケールの画像において、ピクセルから最も近い0の値をもつピクセルまでの距離を求めたものです。

早速OpenCVで試してみます。

# OpenCVで距離変換

次のようにして距離変換をおこなえます。

``` Python
dist = cv2.distanceTransform(img,
                             distanceType=cv2.DIST_L2,
                             maskSize=5
                            )
```

distanceTypeに距離の計算方法を指定します。DIST_L2はユークリッド距離です。
maskSizeには最も近い0の値をもつピクセルまでの距離の近似値を計算するときに使うmaskの大きさを指定します。maskSize=5の例でいえば、maskをあらわす$5\times5$の行列の各要素にはmaskの中心からの距離が格納されています。このmaskを使うことで、正確に距離を計算するよりも速く距離（の近似値）が計算できます。

結果は以下のとおりです。

　　　　　　　　　入力画像　　　　　　　　　　　　　距離変換適用（明るいほど距離大）
![](0b07b8f2f4af88f042743b022481f2b5.png)![](10fec2481837301639f81cf34c21e4b1.png)

背景が0の値をもつので、そこまでの距離が反映されています。窓の中心や、猫の顔の中心は背景から遠いので、大きな値をもっています。
